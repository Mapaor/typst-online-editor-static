(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,t,a)=>{"use strict";var r=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;a.c=function(e){return r.H.useMemoCache(e)}},932,(e,t,a)=>{"use strict";t.exports=e.r(79474)},45232,75254,43531,64659,31278,73884,69809,e=>{"use strict";let t=[{id:"hello",name:"Hello World",description:"A simple document with headings and text",filePath:"/typst-examples/hello-world/main.typ"},{id:"math",name:"Math Document",description:"Mathematical formulas and equations",filePath:"/typst-examples/math-expressions/main.typ"},{id:"using-images",name:"Using Images",description:"Demonstrate how to use images in Typst documents",filePath:"/typst-examples/using-images/main.typ",isMultiFile:!0,additionalFiles:[{path:"cat-image.jpg",filePath:"/typst-examples/using-images/cat-image.jpg"},{path:"star-image.png",filePath:"/typst-examples/using-images/star-image.png"}]},{id:"multi-file",name:"Multi-File Document",description:"Document with multiple files, imports, and includes",filePath:"/typst-examples/multi-file/main.typ",isMultiFile:!0,additionalFiles:[{path:"template.typ",filePath:"/typst-examples/multi-file/template.typ"},{path:"chapters/chapter-1.typ",filePath:"/typst-examples/multi-file/chapters/chapter-1.typ"},{path:"chapters/chapter-2.typ",filePath:"/typst-examples/multi-file/chapters/chapter-2.typ"}]},{id:"mitex",name:"Using a Package",description:"Using Mitex package from the Typst Universe",filePath:"/typst-examples/mitex/main.typ"},{id:"using-templates",name:"Using a Template",description:"Using Graceful-Genetics template (Oxford Physics) from the Typst Universe",filePath:"/typst-examples/using-templates/main.typ"},{id:"local-template",name:"Local Template",description:"CV template with local modules and layouts",filePath:"/typst-examples/local-template/main.typ",isMultiFile:!0,additionalFiles:[{path:"cv.typ",filePath:"/typst-examples/local-template/cv.typ"},{path:"utils.typ",filePath:"/typst-examples/local-template/utils.typ"},{path:"example-cv.yml",filePath:"/typst-examples/local-template/example-cv.yml"},{path:"layouts/bullet-list.typ",filePath:"/typst-examples/local-template/layouts/bullet-list.typ"},{path:"layouts/header.typ",filePath:"/typst-examples/local-template/layouts/header.typ"},{path:"layouts/timeline.typ",filePath:"/typst-examples/local-template/layouts/timeline.typ"},{path:"layouts/prose.typ",filePath:"/typst-examples/local-template/layouts/prose.typ"},{path:"layouts/numbered-list.typ",filePath:"/typst-examples/local-template/layouts/numbered-list.typ"}]},{id:"using-fonts",name:"Using Fonts",description:"Demonstrate how to use custom fonts in Typst documents",filePath:"/typst-examples/using-fonts/main.typ",isMultiFile:!0,additionalFiles:[{path:"RobotoRegular.ttf",filePath:"/typst-examples/using-fonts/RobotoRegular.ttf"},{path:"Andropabe.ttf",filePath:"/typst-examples/using-fonts/Andropabe.ttf"}]}];async function a(e){let t=await fetch(e);if(!t.ok)throw Error(`Failed to load example: ${t.statusText}`);let a=/\.(png|jpg|jpeg|svg)$/i.test(e),r=/\.(ttf|otf)$/i.test(e);if(a||r){let e=await t.blob();return new Promise((t,a)=>{let r=new FileReader;r.onloadend=()=>t(r.result),r.onerror=a,r.readAsDataURL(e)})}return await t.text()}e.s(["TYPST_EXAMPLES",0,t,"fetchExample",()=>a],45232);var r=e.i(71645);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:i="",children:o,iconNode:c,...d},h)=>(0,r.createElement)("svg",{ref:h,...n,width:t,height:t,stroke:e,strokeWidth:l?24*Number(a)/Number(t):a,className:s("lucide",i),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...n},o)=>(0,r.createElement)(i,{ref:o,iconNode:t,className:s(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...n}));return a.displayName=l(e),a};e.s(["default",()=>o],75254);let c=o("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>c],43531);let d=o("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>d],64659);var h=e.i(43476),m=e.i(932);let p=o("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>p],31278);let u=o("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),f=o("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>f],73884);let x=o("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),g=o("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),y=o("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function b(e){let a,r,l,s,n,i=(0,m.c)(12),{isMobile:o,showExamples:c,onToggleExamples:p,onLoadExample:u}=e,f=`flex items-center gap-2 px-3 py-2 bg-gray-700 text-white rounded hover:bg-gray-600 ${o?"text-xs":""}`;return i[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,h.jsx)(y,{className:"w-4 h-4"}),i[0]=a):a=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,h.jsx)(d,{className:"w-4 h-4"}),i[1]=r):r=i[1],i[2]!==p||i[3]!==f?(l=(0,h.jsxs)("button",{className:f,onClick:p,children:[a,"Load Example",r]}),i[2]=p,i[3]=f,i[4]=l):l=i[4],i[5]!==o||i[6]!==u||i[7]!==c?(s=c&&(0,h.jsx)("div",{className:`absolute top-full left-0 mt-1 ${o?"w-64":"w-lg"} max-h-114 overflow-y-auto bg-gray-800 border border-gray-700 rounded shadow-lg z-50`,children:(0,h.jsx)("div",{className:`grid ${o?"grid-cols-1":"grid-cols-2"}`,children:t.map(e=>(0,h.jsxs)("button",{className:`w-full text-left ${o?"px-2 py-2":"px-4 py-3"} hover:bg-gray-700 border-b border-gray-700 border-r last:border-r-0 odd:border-r`,onClick:()=>u(e.id),children:[(0,h.jsx)("div",{className:`font-medium ${o?"text-xs":""}`,children:e.name}),(0,h.jsx)("div",{className:`${o?"text-xs":"text-sm"} text-gray-400`,children:e.description})]},e.id))})}),i[5]=o,i[6]=u,i[7]=c,i[8]=s):s=i[8],i[9]!==l||i[10]!==s?(n=(0,h.jsxs)("div",{className:"relative",children:[l,s]}),i[9]=l,i[10]=s,i[11]=n):n=i[11],n}function w(e){let t,a,r,l,s,n,i,o,d,y,w,v,j,N,k=(0,m.c)(47),{status:S,hasCompiled:C,pdfUrl:_,showExamples:F,isMobile:M,onToggleExamples:P,onCompileNow:E,onDownload:R,onLoadExample:D}=e;k[0]!==C||k[1]!==M||k[2]!==S?(t=()=>{let e=M?"text-xs":"";switch(S){case"compiling":return(0,h.jsxs)("span",{className:`flex items-center gap-2 ${e}`,children:[(0,h.jsx)(p,{className:"w-4 h-4 animate-spin"}),C?"Compiling...":"Initializing compiler..."]});case"done":return(0,h.jsxs)("span",{className:`flex items-center gap-2 ${e}`,children:[(0,h.jsx)(u,{className:"w-4 h-4 text-green-500"}),"Compiled"]});case"error":return(0,h.jsxs)("span",{className:`flex items-center gap-2 ${e}`,children:[(0,h.jsx)(f,{className:"w-4 h-4 text-red-500"}),"Error"]});case"idle":return C?(0,h.jsxs)("span",{className:`flex items-center gap-2 ${e}`,children:[(0,h.jsx)(c,{className:"w-4 h-4 text-green-500"}),"Ready"]}):(0,h.jsxs)("span",{className:`flex items-center gap-2 ${e}`,children:[(0,h.jsx)(x,{className:"w-4 h-4 text-blue-500"}),"Ready to compile"]});default:return"Ready"}},k[0]=C,k[1]=M,k[2]=S,k[3]=t):t=k[3];let T=t;return k[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,h.jsx)("h1",{className:"text-xl font-semibold",children:"Typst Online Editor"}),k[4]=a):a=k[4],k[5]!==M?(r=M&&(0,h.jsx)("a",{href:"https://github.com/Mapaor/typst-online-editor",target:"_blank",rel:"noopener noreferrer",className:"p-2 text-white rounded hover:bg-gray-600 transition-transform duration-200",title:"View on GitHub",children:(0,h.jsx)(g,{className:"w-5 h-5"})}),k[5]=M,k[6]=r):r=k[6],k[7]!==r?(l=(0,h.jsxs)("div",{className:"flex flex-row items-center gap-2 md:justify-start md:w-auto justify-between w-full",children:[a,r]}),k[7]=r,k[8]=l):l=k[8],k[9]!==M||k[10]!==D||k[11]!==P||k[12]!==F?(s=!M&&(0,h.jsx)(b,{isMobile:M,showExamples:F,onToggleExamples:P,onLoadExample:D}),k[9]=M,k[10]=D,k[11]=P,k[12]=F,k[13]=s):s=k[13],k[14]!==M?(n=!M&&(0,h.jsx)("a",{href:"https://github.com/Mapaor/typst-online-editor",target:"_blank",rel:"noopener noreferrer",className:"p-2 text-white rounded hover:bg-gray-600 transition-transform duration-200",title:"View on GitHub",children:(0,h.jsx)(g,{className:"w-5 h-5"})}),k[14]=M,k[15]=n):n=k[15],k[16]!==l||k[17]!==s||k[18]!==n?(i=(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[l,s,n]}),k[16]=l,k[17]=s,k[18]=n,k[19]=i):i=k[19],k[20]!==M||k[21]!==D||k[22]!==P||k[23]!==F?(o=M&&(0,h.jsx)(b,{isMobile:M,showExamples:F,onToggleExamples:P,onLoadExample:D}),k[20]=M,k[21]=D,k[22]=P,k[23]=F,k[24]=o):o=k[24],k[25]!==T||k[26]!==C||k[27]!==M?(d=(!M||!C)&&T(),k[25]=T,k[26]=C,k[27]=M,k[28]=d):d=k[28],k[29]!==o||k[30]!==d?(y=(0,h.jsxs)("div",{className:"flex flex-row items-center gap-2 md:justify-end md:w-auto justify-between w-full",children:[o,d]}),k[29]=o,k[30]=d,k[31]=y):y=k[31],k[32]!==M||k[33]!==E||k[34]!==S?(w=!M&&(0,h.jsx)("button",{className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed ${M?"text-xs":""}`,onClick:E,disabled:"compiling"===S,children:"Compile Now"}),k[32]=M,k[33]=E,k[34]=S,k[35]=w):w=k[35],k[36]!==M||k[37]!==R||k[38]!==_?(v=_&&(0,h.jsx)("button",{className:`px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 ${M?"text-xs":""} text-nowrap`,onClick:R,children:"Download PDF"}),k[36]=M,k[37]=R,k[38]=_,k[39]=v):v=k[39],k[40]!==y||k[41]!==w||k[42]!==v?(j=(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[y,w,v]}),k[40]=y,k[41]=w,k[42]=v,k[43]=j):j=k[43],k[44]!==j||k[45]!==i?(N=(0,h.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-3 px-4 py-3 bg-gray-800 border-b border-gray-700",children:[i,j]}),k[44]=j,k[45]=i,k[46]=N):N=k[46],N}e.s(["default",()=>w],69809)},42584,e=>{"use strict";var t=e.i(43476),a=e.i(932);function r(e){let r,l,s,n=(0,a.c)(9),{isResizing:i,onMouseDown:o,orientation:c}=e;if("horizontal"===(void 0===c?"vertical":c)){let e,a,r=`h-1.5 cursor-row-resize transition-colors shrink-0 hover:bg-blue-400 ${i?"bg-blue-500":"bg-gray-700"}`;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={userSelect:"none"},n[0]=e):e=n[0],n[1]!==o||n[2]!==r?(a=(0,t.jsx)("div",{className:r,onMouseDown:o,style:e}),n[1]=o,n[2]=r,n[3]=a):a=n[3],a}let d=`w-1.5 cursor-col-resize transition-colors shrink-0 hover:bg-blue-400 group ${i?"bg-blue-500":"bg-gray-700"}`;return n[4]===Symbol.for("react.memo_cache_sentinel")?(r={userSelect:"none"},n[4]=r):r=n[4],n[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center gap-1 opacity-0 group-hover:opacity-50 transition-opacity",children:[(0,t.jsx)("div",{className:"w-0.5 h-0.5 bg-gray-300 rounded-full"}),(0,t.jsx)("div",{className:"w-0.5 h-0.5 bg-gray-300 rounded-full"}),(0,t.jsx)("div",{className:"w-0.5 h-0.5 bg-gray-300 rounded-full"})]}),n[5]=l):l=n[5],n[6]!==o||n[7]!==d?(s=(0,t.jsx)("div",{className:d,onMouseDown:o,style:r,title:"Drag to resize",children:l}),n[6]=o,n[7]=d,n[8]=s):s=n[8],s}e.s(["default",()=>r])},9209,e=>{e.v("/typst-online-editor-static/_next/static/media/typst.worker.d20c698d.ts")},80010,e=>{e.v(e.b(["static/chunks/09e09c74ce3744b9.js","static/chunks/5413950b6cb6fdbc.js","static/chunks/8c07123dcbe00fc5.js","static/chunks/d40ec127d587f10e.js","static/chunks/turbopack-a11cea4dc93dea07.js"]))},34912,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(45232),l=e.i(932),s=e.i(75254);let n=(0,s.default)("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),i=(0,s.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),o=(0,s.default)("panel-left-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);function c(e){let a,r,s,n,i,c,h,m=(0,l.c)(15),{project:p,onToggleCollapse:u}=e;m[0]!==p.files?(a=p.files.filter(d),m[0]=p.files,m[1]=a):a=m[1];let f=a.length;return m[2]!==p.name?(r=(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-200",children:p.name}),m[2]=p.name,m[3]=r):r=m[3],m[4]!==f?(s=(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[f," files"]}),m[4]=f,m[5]=s):s=m[5],m[6]!==r||m[7]!==s?(n=(0,t.jsxs)("div",{children:[r,s]}),m[6]=r,m[7]=s,m[8]=n):n=m[8],m[9]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(o,{className:"w-4 h-4"}),m[9]=i):i=m[9],m[10]!==u?(c=(0,t.jsx)("button",{onClick:u,className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-200 transition-colors",title:"Close Files",children:i}),m[10]=u,m[11]=c):c=m[11],m[12]!==n||m[13]!==c?(h=(0,t.jsxs)("div",{className:"p-4 border-b border-gray-700 flex items-start justify-between",children:[n,c]}),m[12]=n,m[13]=c,m[14]=h):h=m[14],h}function d(e){return!e.path.endsWith(".gitkeep")}let h=(0,s.default)("file-plus",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),m=(0,s.default)("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);function p(e){let a,r,s,n,i,o=(0,l.c)(9),{onCreateFile:c,onCreateFolder:d}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(h,{className:"w-4 h-4"}),o[0]=a):a=o[0],o[1]!==c?(r=(0,t.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",title:"New File",children:[a,"New File"]}),o[1]=c,o[2]=r):r=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)(m,{className:"w-4 h-4"}),o[3]=s):s=o[3],o[4]!==d?(n=(0,t.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-gray-700 text-white text-sm rounded hover:bg-gray-600 transition-colors",title:"New Folder",children:[s,"New Folder"]}),o[4]=d,o[5]=n):n=o[5],o[6]!==r||o[7]!==n?(i=(0,t.jsxs)("div",{className:"p-4 border-t border-gray-700 space-y-2",children:[r,n]}),o[6]=r,o[7]=n,o[8]=i):i=o[8],i}let u=(0,s.default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),f=(0,s.default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var x=e.i(43531);let g=(0,s.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function y(e){let a,r,s,n,i,o,c,d,h,m,p,y=(0,l.c)(28),{type:b,value:w,onChange:v,onConfirm:j,onCancel:N,depth:k}=e,S=`${12*k+16}px`;y[0]!==S?(a={paddingLeft:S},y[0]=S,y[1]=a):a=y[1],y[2]!==b?(r="folder"===b?(0,t.jsx)(f,{className:"w-4 h-4 text-blue-400 shrink-0"}):(0,t.jsx)(u,{className:"w-4 h-4 text-blue-400 shrink-0"}),y[2]=b,y[3]=r):r=y[3],y[4]!==v?(s=e=>v(e.target.value),y[4]=v,y[5]=s):s=y[5],y[6]!==N||y[7]!==j?(n=e=>{"Enter"===e.key&&j(),"Escape"===e.key&&N()},y[6]=N,y[7]=j,y[8]=n):n=y[8];let C="folder"===b?"Folder name":"File name";return y[9]!==s||y[10]!==n||y[11]!==C||y[12]!==w?(i=(0,t.jsx)("input",{type:"text",value:w,onChange:s,onKeyDown:n,placeholder:C,className:"flex-1 px-2 py-1 text-sm bg-gray-700 text-gray-100 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400",autoFocus:!0}),y[9]=s,y[10]=n,y[11]=C,y[12]=w,y[13]=i):i=y[13],y[14]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(x.Check,{className:"w-3 h-3 text-green-400"}),y[14]=o):o=y[14],y[15]!==j?(c=(0,t.jsx)("button",{onClick:j,className:"p-1 hover:bg-gray-700 rounded",title:"Create",children:o}),y[15]=j,y[16]=c):c=y[16],y[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(g,{className:"w-3 h-3 text-red-400"}),y[17]=d):d=y[17],y[18]!==N?(h=(0,t.jsx)("button",{onClick:N,className:"p-1 hover:bg-gray-700 rounded",title:"Cancel",children:d}),y[18]=N,y[19]=h):h=y[19],y[20]!==h||y[21]!==r||y[22]!==i||y[23]!==c?(m=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r,i,c,h]}),y[20]=h,y[21]=r,y[22]=i,y[23]=c,y[24]=m):m=y[24],y[25]!==m||y[26]!==a?(p=(0,t.jsx)("div",{className:"px-4 py-2 bg-gray-800",style:a,children:m}),y[25]=m,y[26]=a,y[27]=p):p=y[27],p}let b=(0,s.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var w=e.i(64659);let v=(0,s.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),j=(0,s.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function N(e){let a,r,s,n,i,o,c,d,h,m,p,u,y,N,k,S,C,_,F=(0,l.c)(73),{node:M,depth:P,isExpanded:E,isRenaming:R,isDropTarget:D,isSelected:T,renameValue:$,onToggle:L,onSelect:A,onStartRename:z,onRename:U,onCancelRename:W,onRenameChange:O,onDelete:I,onDragOver:V,onDrop:H,onExternalDrop:q,children:Z}=e;F[0]!==M.path?(a=M.path.split("/").pop()||M.path,F[0]=M.path,F[1]=a):a=F[1];let B=a;if(R){let e,a,r,l,s,n,i,o,c,d,h,m,p=`${12*P+16}px`;return F[2]!==p?(e={paddingLeft:p},F[2]=p,F[3]=e):e=F[3],F[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(f,{className:"w-4 h-4 text-blue-400 shrink-0"}),F[4]=a):a=F[4],F[5]!==O?(r=e=>O(e.target.value),F[5]=O,F[6]=r):r=F[6],F[7]!==W||F[8]!==U?(l=e=>{"Enter"===e.key&&U(),"Escape"===e.key&&W()},F[7]=W,F[8]=U,F[9]=l):l=F[9],F[10]!==$||F[11]!==r||F[12]!==l?(s=(0,t.jsx)("input",{type:"text",value:$,onChange:r,onKeyDown:l,className:"flex-1 px-2 py-1 text-sm bg-gray-700 text-gray-100 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),F[10]=$,F[11]=r,F[12]=l,F[13]=s):s=F[13],F[14]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(x.Check,{className:"w-3 h-3 text-green-400"}),F[14]=n):n=F[14],F[15]!==U?(i=(0,t.jsx)("button",{onClick:U,className:"p-1 hover:bg-gray-700 rounded",title:"Rename",children:n}),F[15]=U,F[16]=i):i=F[16],F[17]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(g,{className:"w-3 h-3 text-red-400"}),F[17]=o):o=F[17],F[18]!==W?(c=(0,t.jsx)("button",{onClick:W,className:"p-1 hover:bg-gray-700 rounded",title:"Cancel",children:o}),F[18]=W,F[19]=c):c=F[19],F[20]!==c||F[21]!==s||F[22]!==i?(d=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a,s,i,c]}),F[20]=c,F[21]=s,F[22]=i,F[23]=d):d=F[23],F[24]!==d||F[25]!==e?(h=(0,t.jsx)("div",{className:"px-4 py-2 bg-gray-800",style:e,children:d}),F[24]=d,F[25]=e,F[26]=h):h=F[26],F[27]!==Z||F[28]!==h?(m=(0,t.jsxs)("div",{children:[h,Z]}),F[27]=Z,F[28]=h,F[29]=m):m=F[29],m}let G=`group flex items-center justify-between px-4 py-2 cursor-pointer hover:bg-gray-700 transition-colors ${D?"bg-gray-700 border-l-2 border-blue-500":""} ${T?"bg-gray-700":""}`,J=`${12*P+16}px`;return F[30]!==J?(r={paddingLeft:J},F[30]=J,F[31]=r):r=F[31],F[32]!==A||F[33]!==L?(s=()=>{L(),A()},F[32]=A,F[33]=L,F[34]=s):s=F[34],F[35]!==V?(n=e=>{e.dataTransfer.types.includes("Files")?(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"):V(e)},F[35]=V,F[36]=n):n=F[36],F[37]!==M.path||F[38]!==H||F[39]!==q?(i=e=>{e.dataTransfer.types.includes("Files")&&q?q(e,M.path):H(e)},F[37]=M.path,F[38]=H,F[39]=q,F[40]=i):i=F[40],F[41]!==E?(o=E?(0,t.jsx)(w.ChevronDown,{className:"w-3 h-3 text-gray-400 shrink-0"}):(0,t.jsx)(b,{className:"w-3 h-3 text-gray-400 shrink-0"}),F[41]=E,F[42]=o):o=F[42],F[43]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(f,{className:"w-4 h-4 text-gray-400 shrink-0"}),F[43]=c):c=F[43],F[44]!==B?(d=(0,t.jsx)("span",{className:"text-sm text-gray-300 truncate",title:B,children:B}),F[44]=B,F[45]=d):d=F[45],F[46]!==d||F[47]!==o?(h=(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o,c,d]}),F[46]=d,F[47]=o,F[48]=h):h=F[48],F[49]!==z?(m=e=>{e.stopPropagation(),z()},F[49]=z,F[50]=m):m=F[50],F[51]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)(v,{className:"w-3 h-3 text-gray-300"}),F[51]=p):p=F[51],F[52]!==m?(u=(0,t.jsx)("button",{onClick:m,className:"p-1 hover:bg-gray-600 rounded",title:"Rename folder",children:p}),F[52]=m,F[53]=u):u=F[53],F[54]!==I?(y=e=>{e.stopPropagation(),I()},F[54]=I,F[55]=y):y=F[55],F[56]===Symbol.for("react.memo_cache_sentinel")?(N=(0,t.jsx)(j,{className:"w-3 h-3 text-red-400"}),F[56]=N):N=F[56],F[57]!==y?(k=(0,t.jsx)("button",{onClick:y,className:"p-1 hover:bg-red-900/50 rounded",title:"Delete folder",children:N}),F[57]=y,F[58]=k):k=F[58],F[59]!==u||F[60]!==k?(S=(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u,k]}),F[59]=u,F[60]=k,F[61]=S):S=F[61],F[62]!==h||F[63]!==S||F[64]!==G||F[65]!==r||F[66]!==s||F[67]!==n||F[68]!==i?(C=(0,t.jsxs)("div",{className:G,style:r,onClick:s,onDragOver:n,onDrop:i,children:[h,S]}),F[62]=h,F[63]=S,F[64]=G,F[65]=r,F[66]=s,F[67]=n,F[68]=i,F[69]=C):C=F[69],F[70]!==Z||F[71]!==C?(_=(0,t.jsxs)("div",{children:[C,Z]}),F[70]=Z,F[71]=C,F[72]=_):_=F[72],_}let k=(0,s.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function S(e){let a,r,s,n,i,o,c,d,h,m=(0,l.c)(54),{fileName:p,depth:f,isActive:y,isMainFile:b,isRenaming:w,isDragging:N,canDrag:S,canRename:C,canDelete:_,renameValue:F,onSelect:M,onStartRename:P,onRename:E,onCancelRename:R,onRenameChange:D,onDelete:T,onDragStart:$,onDragEnd:L}=e;if(w){let e,a,r,l,s,n,i,o,c,d,h,p=`${12*f+16}px`;return m[0]!==p?(e={paddingLeft:p},m[0]=p,m[1]=e):e=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(u,{className:"w-4 h-4 text-blue-400 shrink-0"}),m[2]=a):a=m[2],m[3]!==D?(r=e=>D(e.target.value),m[3]=D,m[4]=r):r=m[4],m[5]!==R||m[6]!==E?(l=e=>{"Enter"===e.key&&E(),"Escape"===e.key&&R()},m[5]=R,m[6]=E,m[7]=l):l=m[7],m[8]!==F||m[9]!==r||m[10]!==l?(s=(0,t.jsx)("input",{type:"text",value:F,onChange:r,onKeyDown:l,className:"flex-1 px-2 py-1 text-sm bg-gray-700 text-gray-100 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),m[8]=F,m[9]=r,m[10]=l,m[11]=s):s=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(x.Check,{className:"w-3 h-3 text-green-400"}),m[12]=n):n=m[12],m[13]!==E?(i=(0,t.jsx)("button",{onClick:E,className:"p-1 hover:bg-gray-700 rounded",title:"Rename",children:n}),m[13]=E,m[14]=i):i=m[14],m[15]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(g,{className:"w-3 h-3 text-red-400"}),m[15]=o):o=m[15],m[16]!==R?(c=(0,t.jsx)("button",{onClick:R,className:"p-1 hover:bg-gray-700 rounded",title:"Cancel",children:o}),m[16]=R,m[17]=c):c=m[17],m[18]!==c||m[19]!==s||m[20]!==i?(d=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a,s,i,c]}),m[18]=c,m[19]=s,m[20]=i,m[21]=d):d=m[21],m[22]!==d||m[23]!==e?(h=(0,t.jsx)("div",{className:"px-4 py-2 bg-gray-800",style:e,children:d}),m[22]=d,m[23]=e,m[24]=h):h=m[24],h}let A=`
					group flex items-center justify-between px-4 py-2 cursor-pointer
					hover:bg-gray-700 transition-colors
					${y?"bg-gray-700 border-l-2 border-blue-500":""}
					${N?"opacity-50":""}
				`,z=`${12*f+16}px`;m[25]!==z?(a={paddingLeft:z},m[25]=z,m[26]=a):a=m[26],m[27]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(u,{className:"w-4 h-4 text-gray-400 shrink-0"}),m[27]=r):r=m[27];let U=`
							text-sm truncate
							${y?"text-blue-300 font-medium":"text-gray-300"}
						`;return m[28]!==p||m[29]!==U?(s=(0,t.jsx)("span",{className:U,title:p,children:p}),m[28]=p,m[29]=U,m[30]=s):s=m[30],m[31]!==b?(n=b&&(0,t.jsx)(k,{className:"w-3 h-3 text-yellow-400 fill-yellow-400 shrink-0"}),m[31]=b,m[32]=n):n=m[32],m[33]!==s||m[34]!==n?(i=(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r,s,n]}),m[33]=s,m[34]=n,m[35]=i):i=m[35],m[36]!==C||m[37]!==P?(o=C&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),P()},className:"p-1 hover:bg-gray-600 rounded",title:"Rename file",children:(0,t.jsx)(v,{className:"w-3 h-3 text-gray-300"})}),m[36]=C,m[37]=P,m[38]=o):o=m[38],m[39]!==_||m[40]!==T?(c=_&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),T()},className:"p-1 hover:bg-red-900/50 rounded",title:"Delete file",children:(0,t.jsx)(j,{className:"w-3 h-3 text-red-400"})}),m[39]=_,m[40]=T,m[41]=c):c=m[41],m[42]!==c||m[43]!==o?(d=(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o,c]}),m[42]=c,m[43]=o,m[44]=d):d=m[44],m[45]!==S||m[46]!==L||m[47]!==$||m[48]!==M||m[49]!==A||m[50]!==d||m[51]!==a||m[52]!==i?(h=(0,t.jsxs)("div",{draggable:S,onDragStart:$,onDragEnd:L,className:A,style:a,onClick:M,children:[i,d]}),m[45]=S,m[46]=L,m[47]=$,m[48]=M,m[49]=A,m[50]=d,m[51]=a,m[52]=i,m[53]=h):h=m[53],h}let C=[".typ",".txt",".md",".mdx",".png",".jpg",".jpeg",".svg",".json",".csv",".dat",".yml",".yaml",".toml",".ttf",".otf"];function _(e){let r,s,o,d,h,m,u,f,x,g,b,w,v,j,k,_,P,E,R,D,T,$=(0,l.c)(89),{project:L,activeFile:A,onFileSelect:z,onFileCreate:U,onFolderCreate:W,onFileDelete:O,onFileRename:I,onFileMove:V,isCollapsed:H,onToggleCollapse:q}=e,Z=void 0!==H&&H,[B,G]=(0,a.useState)(!1),[,J]=(0,a.useState)(0),{expandedFolders:X,toggleFolder:K,expandFolder:Y}=function(){let e,t,r,s,n=(0,l.c)(5);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Set(["/"]),n[0]=e):e=n[0];let[i,o]=(0,a.useState)(e);n[1]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{o(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},n[1]=t):t=n[1];let c=t;n[2]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{o(t=>{let a=new Set(t);return a.add(e),a})},n[2]=r):r=n[2];let d=r;return n[3]!==i?(s={expandedFolders:i,toggleFolder:c,expandFolder:d},n[3]=i,n[4]=s):s=n[4],s}(),{creatingItem:Q,setCreatingItem:ee,newItemName:et,setNewItemName:ea,renamingItem:er,renameValue:el,setRenameValue:es,selectedItem:en,setSelectedItem:ei,handleCreateItem:eo,handleCancelCreate:ec,handleStartRename:ed,handleRename:eh,handleCancelRename:em}=function(e,t,r,s){let n,i,o,c,d,h,m=(0,l.c)(21),[p,u]=(0,a.useState)(null),[f,x]=(0,a.useState)(""),[g,y]=(0,a.useState)(null),[b,w]=(0,a.useState)(""),[v,j]=(0,a.useState)(null);m[0]!==p||m[1]!==f||m[2]!==s||m[3]!==e||m[4]!==t?(n=()=>{if(!f.trim()||!p)return;let a=p.parentPath?`${p.parentPath}/${f.trim()}`:f.trim();p.parentPath&&s(p.parentPath),"file"===p.type?e(a):t(a),u(null),x("")},m[0]=p,m[1]=f,m[2]=s,m[3]=e,m[4]=t,m[5]=n):n=m[5];let N=n;m[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{u(null),x("")},m[6]=i):i=m[6];let k=i;m[7]===Symbol.for("react.memo_cache_sentinel")?(o=(e,t)=>{y(e),w(e.split("/").pop()||e)},m[7]=o):o=m[7];let S=o;m[8]!==r||m[9]!==b||m[10]!==g?(c=()=>{if(!b.trim()||!g)return;let e=g.split("/").slice(0,-1).join("/"),t=e?`${e}/${b.trim()}`:b.trim();t!==g&&r(g,t),y(null),w("")},m[8]=r,m[9]=b,m[10]=g,m[11]=c):c=m[11];let C=c;m[12]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{y(null),w("")},m[12]=d):d=m[12];let _=d;return m[13]!==p||m[14]!==N||m[15]!==C||m[16]!==f||m[17]!==b||m[18]!==g||m[19]!==v?(h={creatingItem:p,setCreatingItem:u,newItemName:f,setNewItemName:x,renamingItem:g,renameValue:b,setRenameValue:w,selectedItem:v,setSelectedItem:j,handleCreateItem:N,handleCancelCreate:k,handleStartRename:S,handleRename:C,handleCancelRename:_},m[13]=p,m[14]=N,m[15]=C,m[16]=f,m[17]=b,m[18]=g,m[19]=v,m[20]=h):h=m[20],h}(U,W,I,Y),{draggedItem:ep,dropTarget:eu,handleDragStart:ef,handleDragEnd:ex,handleDragOver:eg,handleDrop:ey}=function(e){let t,r,s,n,i,o=(0,l.c)(12),[c,d]=(0,a.useState)(null),[h,m]=(0,a.useState)(null);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(e,t)=>{"main.typ"===e?t.preventDefault():(d(e),t.dataTransfer.effectAllowed="move")},o[0]=t):t=o[0];let p=t;o[1]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{d(null),m(null)},o[1]=r):r=o[1];let u=r;o[2]!==c?(s=(e,t,a)=>{a.preventDefault(),a.stopPropagation(),c&&c!==e&&(t?m(e):m(""))},o[2]=c,o[3]=s):s=o[3];let f=s;o[4]!==c||o[5]!==e?(n=(t,a,r)=>{let l;if(r.preventDefault(),r.stopPropagation(),!c)return;let s=c.split("/").pop();(l=a?`${t}/${s}`:s||c)!==c&&e(c,l),d(null),m(null)},o[4]=c,o[5]=e,o[6]=n):n=o[6];let x=n;return o[7]!==c||o[8]!==h||o[9]!==f||o[10]!==x?(i={draggedItem:c,dropTarget:h,handleDragStart:p,handleDragEnd:u,handleDragOver:f,handleDrop:x},o[7]=c,o[8]=h,o[9]=f,o[10]=x,o[11]=i):i=o[11],i}(V);$[0]!==en?(r=function(){return en?en.isFolder?en.path:en.path.split("/").slice(0,-1).join("/"):""},$[0]=en,$[1]=r):r=$[1];let eb=r;$[2]===Symbol.for("react.memo_cache_sentinel")?(s=function(e){return C.some(t=>e.toLowerCase().endsWith(t))},$[2]=s):s=$[2];let ew=s;$[3]!==U||$[4]!==L?(o=async function(e,t){let a=void 0===t?"":t;for(let t of Array.from(e)){if(!ew(t.name)){console.warn(`File ${t.name} has unsupported extension. Allowed: ${C.join(", ")}`);continue}let e=a?`${a}/${t.name}`:t.name;if(!L.files.some(t=>t.path===e)||confirm(`File "${t.name}" already exists. Do you want to overwrite it?`))try{if(t.name.match(/\.(png|jpg|jpeg|svg|ttf|otf)$/i)){let a=new FileReader;a.onload=t=>{let a=t.target?.result;U(e,a)},a.readAsDataURL(t)}else{let a=new FileReader;a.onload=t=>{let a=t.target?.result;U(e,a)},a.readAsText(t)}}catch(e){console.error(`Failed to upload file ${t.name}:`,e)}}},$[3]=U,$[4]=L,$[5]=o):o=$[5];let ev=o;$[6]===Symbol.for("react.memo_cache_sentinel")?(d=function(e){e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation(),J(M),G(!0))},$[6]=d):d=$[6];let ej=d;$[7]===Symbol.for("react.memo_cache_sentinel")?(h=function(e){e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation(),J(e=>{let t=e-1;return 0===t&&G(!1),t}))},$[7]=h):h=$[7];let eN=h;$[8]===Symbol.for("react.memo_cache_sentinel")?(m=function(e){e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")},$[8]=m):m=$[8];let ek=m;$[9]!==ev?(u=async function(e,t){if(e.dataTransfer.types.includes("Files")){e.preventDefault(),e.stopPropagation(),G(!1),J(0);let a=e.dataTransfer.files;a.length>0&&await ev(a,void 0===t?"":t)}},$[9]=ev,$[10]=u):u=$[10];let eS=u;if($[11]!==A||$[12]!==Q||$[13]!==ep||$[14]!==eu||$[15]!==X||$[16]!==ec||$[17]!==em||$[18]!==eo||$[19]!==ex||$[20]!==eg||$[21]!==ef||$[22]!==ey||$[23]!==eS||$[24]!==eh||$[25]!==ed||$[26]!==Z||$[27]!==B||$[28]!==et||$[29]!==O||$[30]!==z||$[31]!==q||$[32]!==L||$[33]!==el||$[34]!==er||$[35]!==en?.path||$[36]!==ea||$[37]!==es||$[38]!==ei||$[39]!==K){_=Symbol.for("react.early_return_sentinel");e:{let e,a,r=(e=[],a=new Map,L.files.forEach(t=>{let r=t.path.split("/"),l="";for(let t=0;t<r.length-1;t++){let s=r[t],n=l;if(l=l?`${l}/${s}`:s,!a.has(l)){let t={path:l,isFolder:!0,children:[]};if(a.set(l,t),n){let e=a.get(n);e?.children?.push(t)}else e.push(t)}}}),L.files.forEach(t=>{if(t.path.endsWith(".gitkeep"))return;let r=t.path.split("/").slice(0,-1).join("/"),l={path:t.path,isFolder:!1};if(r){let e=a.get(r);e?.children?.push(l)}else e.push(l)}),e);if(Z){let e,a;$[50]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(n,{className:"w-5 h-5"}),$[50]=e):e=$[50],$[51]!==q?(a=(0,t.jsx)("div",{className:"h-full flex flex-col items-center justify-start bg-gray-900 border-r border-gray-700",children:(0,t.jsx)("button",{onClick:q,className:"p-3 hover:bg-gray-800 text-gray-400 hover:text-gray-200 transition-colors",title:"Show Files",children:e})}),$[51]=q,$[52]=a):a=$[52],_=a;break e}j="relative h-full flex flex-col w-full bg-gray-900 border-r border-gray-700";let l=q||F;$[53]!==L||$[54]!==l?(k=(0,t.jsx)(c,{project:L,onToggleCollapse:l}),$[53]=L,$[54]=l,$[55]=k):k=$[55],P=`flex-1 overflow-y-auto relative transition-colors ${B?"bg-blue-900/20 border-2 border-dashed border-blue-500":""}`,f=ej,x=eN,$[56]!==ep||$[57]!==eg?(g=e=>{e.dataTransfer.types.includes("Files")?ek(e):ep&&!e.defaultPrevented&&eg("",!1,e)},$[56]=ep,$[57]=eg,$[58]=g):g=$[58],$[59]!==ep||$[60]!==ey||$[61]!==eS?(b=e=>{e.dataTransfer.types.includes("Files")?eS(e,""):ep&&!e.defaultPrevented&&ey("",!1,e)},$[59]=ep,$[60]=ey,$[61]=eS,$[62]=b):b=$[62],$[63]!==B?(w=B&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/80 pointer-events-none z-10",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(i,{className:"w-12 h-12 text-blue-400 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-blue-300 font-medium",children:"Drop files to upload"}),(0,t.jsxs)("p",{className:"text-gray-400 text-sm mt-1",children:["Supported: ",C.join(", ")]})]})}),$[63]=B,$[64]=w):w=$[64],v=function e(a,r){let l=void 0===r?0:r;return a.map(a=>{if(a.isFolder){let r=X.has(a.path),s=er===a.path,n=eu===a.path,i=en?.path===a.path;return(0,t.jsxs)(N,{node:a,depth:l,isExpanded:r,isRenaming:s,isDropTarget:n,isSelected:i,renameValue:el,onToggle:()=>K(a.path),onSelect:()=>ei({path:a.path,isFolder:!0}),onStartRename:()=>ed(a.path,!0),onRename:eh,onCancelRename:em,onRenameChange:es,onDelete:()=>O(a.path),onDragOver:e=>eg(a.path,!0,e),onDrop:e=>ey(a.path,!0,e),onExternalDrop:eS,children:[r&&a.children&&e(a.children,l+1),r&&Q?.parentPath===a.path&&(0,t.jsx)(y,{type:Q.type,value:et,onChange:ea,onConfirm:eo,onCancel:ec,depth:l+1})]},a.path)}{let e=a.path===A,r=a.path===L.mainFile,s=a.path.split("/").pop()||a.path,n=er===a.path,i=ep===a.path,o="main.typ"!==a.path,c="main.typ"!==a.path,d="main.typ"!==a.path;return(0,t.jsx)(S,{fileName:s,depth:l,isActive:e,isMainFile:r,isRenaming:n,isDragging:i,canDrag:o,canRename:c,canDelete:d,renameValue:el,onSelect:()=>{z(a.path),ei({path:a.path,isFolder:!1})},onStartRename:()=>ed(a.path,!1),onRename:eh,onCancelRename:em,onRenameChange:es,onDelete:()=>O(a.path),onDragStart:e=>ef(a.path,e),onDragEnd:ex},a.path)}})}(r)}$[11]=A,$[12]=Q,$[13]=ep,$[14]=eu,$[15]=X,$[16]=ec,$[17]=em,$[18]=eo,$[19]=ex,$[20]=eg,$[21]=ef,$[22]=ey,$[23]=eS,$[24]=eh,$[25]=ed,$[26]=Z,$[27]=B,$[28]=et,$[29]=O,$[30]=z,$[31]=q,$[32]=L,$[33]=el,$[34]=er,$[35]=en?.path,$[36]=ea,$[37]=es,$[38]=ei,$[39]=K,$[40]=f,$[41]=x,$[42]=g,$[43]=b,$[44]=w,$[45]=v,$[46]=j,$[47]=k,$[48]=_,$[49]=P}else f=$[40],x=$[41],g=$[42],b=$[43],w=$[44],v=$[45],j=$[46],k=$[47],_=$[48],P=$[49];return _!==Symbol.for("react.early_return_sentinel")?_:($[65]!==Q||$[66]!==ec||$[67]!==eo||$[68]!==et||$[69]!==ea?(E=Q?.parentPath===""&&(0,t.jsx)(y,{type:Q.type,value:et,onChange:ea,onConfirm:eo,onCancel:ec,depth:0}),$[65]=Q,$[66]=ec,$[67]=eo,$[68]=et,$[69]=ea,$[70]=E):E=$[70],$[71]!==f||$[72]!==x||$[73]!==g||$[74]!==b||$[75]!==w||$[76]!==v||$[77]!==E||$[78]!==P?(R=(0,t.jsxs)("div",{className:P,onDragEnter:f,onDragLeave:x,onDragOver:g,onDrop:b,children:[w,v,E]}),$[71]=f,$[72]=x,$[73]=g,$[74]=b,$[75]=w,$[76]=v,$[77]=E,$[78]=P,$[79]=R):R=$[79],$[80]!==Y||$[81]!==eb||$[82]!==ee?(D=(0,t.jsx)(p,{onCreateFile:()=>{let e=eb();e&&Y(e),ee({type:"file",parentPath:e})},onCreateFolder:()=>{let e=eb();e&&Y(e),ee({type:"folder",parentPath:e})}}),$[80]=Y,$[81]=eb,$[82]=ee,$[83]=D):D=$[83],$[84]!==j||$[85]!==k||$[86]!==R||$[87]!==D?(T=(0,t.jsxs)("div",{className:j,children:[k,R,D]}),$[84]=j,$[85]=k,$[86]=R,$[87]=D,$[88]=T):T=$[88],T)}function F(){}function M(e){return e+1}var P=e.i(69809),E=e.i(85395);function R({filePath:r,content:l,onChange:s}){let[n,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(!1),d=(0,a.useRef)(null),h=r.split(".").pop()?.toLowerCase()||"",m=r.endsWith(".typ"),p=["md","mdx"].includes(h),u="json"===h,f=["yaml","yml"].includes(h),x="csv"===h,g="toml"===h,y=m||p||u||f||x||g,b=["jpg","jpeg","png","gif","bmp","webp"].includes(h),w=["ttf","otf","woff","woff2"].includes(h),v=b||w,j=()=>b?"This is an image (binary data). Content too large to show here.":w?"This is a font file (binary data). Content too large to show here.":"";return(0,a.useEffect)(()=>{d.current||(c(!0),(async()=>{try{let{bundledLanguages:t}=await e.A(140),a=await fetch("/textmate-sintax/typst.tmLanguage.json"),r=await a.json();d.current=await (0,E.createHighlighter)({langs:[{name:"typst",scopeName:"source.typst",...r},t.markdown,t.json,t.yaml,t.csv,t.toml],themes:["github-dark"]})}catch(e){console.error("Failed to initialize highlighter:",e)}finally{c(!1)}})())},[]),(0,a.useEffect)(()=>{if(y&&d.current&&!o){if(!l)return void i("");try{let e="markdown";m?e="typst":u?e="json":f?e="yaml":x?e="csv":g&&(e="toml");let t=d.current.codeToHtml(l,{lang:e,theme:"github-dark"}).replace(/background-color:[^;"]*/g,"");i(t)}catch(e){console.error("Syntax highlighting error:",e),i("")}}else y||i("")},[l,y,m,o]),(0,t.jsxs)("div",{className:"flex flex-col h-full border-r border-gray-700",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-gray-800 border-b border-gray-700 text-sm text-gray-400",children:r}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto overflow-x-hidden",children:[y&&o&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 text-sm z-10",children:"Initializing highlighter..."}),(0,t.jsxs)("div",{className:"relative min-h-full",children:[(0,t.jsx)("pre",{className:"m-0 p-0 font-mono text-sm leading-relaxed whitespace-pre-wrap break-words",style:{tabSize:4,lineHeight:"1.625",letterSpacing:"0",color:"transparent",minHeight:"100%",paddingBottom:"100vh"},"aria-hidden":"true",children:(0,t.jsx)("code",{className:"block p-4",children:v?j():y&&n?(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:n}}):l})}),(0,t.jsx)("textarea",{className:"absolute inset-0 w-full p-4 m-0 font-mono text-sm resize-none focus:outline-none leading-relaxed whitespace-pre-wrap break-words border-0 cursor-text overflow-hidden box-border",style:{tabSize:4,color:v?"#fbbf24":y&&n&&!o?"transparent":"white",caretColor:v?"#fbbf24":"white",background:"transparent",lineHeight:"1.625",letterSpacing:"0",WebkitTextFillColor:v?"#fbbf24":y&&n&&!o?"transparent":"white",wordWrap:"break-word",minHeight:"100%",height:"auto"},value:v?j():l,onChange:e=>s(e.target.value),placeholder:"Type here...",spellCheck:!1,readOnly:v})]})]})]})}let D=null;async function T(){return D||(D=e.A(25834).then(e=>(e.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${e.version}/build/pdf.worker.min.mjs`,globalThis.pdfjsLib=e,e))),D}let $=(0,s.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),L=(0,s.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),A=(0,s.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),z=(0,s.default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),U=(0,s.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),W=(0,s.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function O(e){let a,r,s,n=(0,l.c)(17),{pdfUrl:i,currentPage:o,totalPages:c,zoom:d,onPrevPage:h,onNextPage:m,onZoomIn:p,onZoomOut:u,onZoomFit:f,isCollapsed:x,onToggleCollapse:y}=e;if(x){let e,a;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(W,{className:"w-5 h-5"}),n[0]=e):e=n[0],n[1]!==y?(a=(0,t.jsx)("div",{className:"h-full flex flex-col items-center justify-start bg-gray-800 border-l border-gray-700",children:(0,t.jsx)("button",{onClick:y,className:"p-3 hover:bg-gray-700 text-gray-400 hover:text-gray-200 transition-colors",title:"Show Preview",children:e})}),n[1]=y,n[2]=a):a=n[2],a}return n[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("span",{className:"text-sm text-gray-400 whitespace-nowrap",children:"PDF Preview"}),n[3]=a):a=n[3],n[4]!==o||n[5]!==m||n[6]!==h||n[7]!==y||n[8]!==f||n[9]!==p||n[10]!==u||n[11]!==i||n[12]!==c||n[13]!==d?(r=i&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:h,className:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-gray-200 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous Page",disabled:o<=1,children:(0,t.jsx)(U,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 min-w-[50px] text-center",children:[o," / ",c]}),(0,t.jsx)("button",{onClick:m,className:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-gray-200 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Next Page",disabled:o>=c,children:(0,t.jsx)(b,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"w-px h-4 bg-gray-700"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:u,className:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-gray-200 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Zoom Out",disabled:d<=100,children:(0,t.jsx)(L,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:f,className:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-gray-200 transition-colors",title:"Zoom to Fit",children:(0,t.jsx)(z,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:p,className:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-gray-200 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Zoom In",disabled:d>=200,children:(0,t.jsx)($,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 min-w-[45px] text-center",children:[d,"%"]})]}),(0,t.jsx)("div",{className:"w-px h-4 bg-gray-700"}),(0,t.jsx)("button",{onClick:()=>window.open(i,"_blank"),className:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-gray-200 transition-colors",title:"Open in New Tab",children:(0,t.jsx)(A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:y,className:"p-1 hover:bg-gray-700 rounded text-gray-400 hover:text-gray-200 transition-colors",title:"Close Preview",children:(0,t.jsx)(g,{className:"w-4 h-4"})})]}),n[4]=o,n[5]=m,n[6]=h,n[7]=y,n[8]=f,n[9]=p,n[10]=u,n[11]=i,n[12]=c,n[13]=d,n[14]=r):r=n[14],n[15]!==r?(s=(0,t.jsxs)("div",{className:"px-4 py-2 bg-gray-800 border-b border-gray-700 flex items-center justify-between",children:[a,r]}),n[15]=r,n[16]=s):s=n[16],s}var I=e.i(31278);function V(e){let a,r,s,n,i,o=(0,l.c)(16),{canvasRefs:c,pageRefs:d,textLayerRefs:h,annotationLayerRefs:m,containerRef:p,isRendering:u,totalPages:f}=e;return o[0]!==u?(a=u&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 z-10",children:(0,t.jsx)(I.Loader2,{className:"w-8 h-8 animate-spin text-gray-600"})}),o[0]=u,o[1]=a):a=o[1],o[2]!==f?(r=Array.from({length:f},H),o[2]=f,o[3]=r):r=o[3],o[4]!==m||o[5]!==c||o[6]!==d||o[7]!==r||o[8]!==h?(s=(0,t.jsx)("div",{className:"pdfViewer",children:r.map(e=>(0,t.jsx)("div",{ref:t=>{t&&d.current.set(e,t)},className:"page mx-auto my-4 first:mt-0",style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.05)"},children:(0,t.jsxs)("div",{className:"canvasWrapper bg-white relative",children:[(0,t.jsx)("canvas",{ref:t=>{t&&c.current.set(e,{canvas:t,renderTask:null})},className:"block",role:"presentation"}),(0,t.jsx)("div",{ref:t=>{t&&h.current.set(e,t)},className:"textLayer"}),(0,t.jsx)("div",{ref:t=>{t&&m.current.set(e,t)},className:"annotationLayer"})]})},e))}),o[4]=m,o[5]=c,o[6]=d,o[7]=r,o[8]=h,o[9]=s):s=o[9],o[10]!==p||o[11]!==s?(n=(0,t.jsx)("div",{ref:p,className:"pdfjs-container absolute inset-0 overflow-auto p-6",children:s}),o[10]=p,o[11]=s,o[12]=n):n=o[12],o[13]!==a||o[14]!==n?(i=(0,t.jsxs)("div",{className:"preview-container relative flex-1 bg-gray-100",children:[a,n]}),o[13]=a,o[14]=n,o[15]=i):i=o[15],i}function H(e,t){return t+1}var q=e.i(73884);function Z(e){let a,r,s,n,i,o=(0,l.c)(16),{status:c,errorMsg:d,hasCompiled:h}=e;return o[0]!==h||o[1]!==c?(a="compiling"===c&&(0,t.jsxs)("p",{className:"text-lg flex items-center justify-center gap-2",children:[(0,t.jsx)(I.Loader2,{className:"w-5 h-5 animate-spin"}),h?"Compiling...":"Initializing compiler..."]}),o[0]=h,o[1]=c,o[2]=a):a=o[2],o[3]!==d||o[4]!==c?(r="error"===c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-lg text-red-500 flex items-center justify-center gap-2",children:[(0,t.jsx)(q.XCircle,{className:"w-5 h-5"}),"Error"]}),(0,t.jsx)("pre",{className:"mt-2 text-sm text-left max-w-2xl overflow-auto p-4 bg-gray-800 rounded",children:d})]}),o[3]=d,o[4]=c,o[5]=r):r=o[5],o[6]!==h||o[7]!==c?(s="idle"===c&&(0,t.jsx)("p",{className:"text-lg",children:h?"Type to edit and compile":'Click "Compile Now" or start typing to generate PDF'}),o[6]=h,o[7]=c,o[8]=s):s=o[8],o[9]!==c?(n="done"===c&&(0,t.jsx)("p",{className:"text-lg text-gray-400",children:"Compilation complete"}),o[9]=c,o[10]=n):n=o[10],o[11]!==a||o[12]!==r||o[13]!==s||o[14]!==n?(i=(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsxs)("div",{className:"text-center text-gray-400",children:[a,r,s,n]})}),o[11]=a,o[12]=r,o[13]=s,o[14]=n,o[15]=i):i=o[15],i}function B(e){let r,s,n,i,o,c,d,h,m,p=(0,l.c)(40),{pdfUrl:u,status:f,errorMsg:x,hasCompiled:g,isCollapsed:y,onToggleCollapse:b}=e,[w,v]=(0,a.useState)(100),[j,N]=(0,a.useState)(1);p[0]!==j||p[1]!==y||p[2]!==u||p[3]!==w?(r={pdfUrl:u,currentPage:j,zoom:w,isCollapsed:y,onPageChange:N},p[0]=j,p[1]=y,p[2]=u,p[3]=w,p[4]=r):r=p[4];let{totalPages:k,isRendering:S,canvasRefs:C,pageRefs:_,textLayerRefs:F,annotationLayerRefs:M,containerRef:P,scrollToPage:E}=function({pdfUrl:e,currentPage:t,zoom:r,isCollapsed:l,onPageChange:s}){let[n,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(1),[d,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(0),u=(0,a.useRef)(new Map),f=(0,a.useRef)(new Map),x=(0,a.useRef)(new Map),g=(0,a.useRef)(null),y=(0,a.useRef)(new Map),b=(0,a.useRef)(null),w=(0,a.useRef)(!1),v=(0,a.useRef)(null),j=(0,a.useRef)(!1),N=(0,a.useRef)(t);return(0,a.useEffect)(()=>{if(!e)return;let t=!0;return(async()=>{try{let a=(await T()).getDocument(e),r=await a.promise;t&&(i(r),c(r.numPages))}catch(e){console.error("Failed to load PDF:",e)}})(),()=>{t=!1}},[e]),(0,a.useEffect)(()=>{let e=t!==N.current;if(N.current=t,e&&j.current){let e=y.current.get(t);e&&e.scrollIntoView({behavior:"smooth",block:"start"}),j.current=!1}},[t]),(0,a.useEffect)(()=>{if(!n||!g.current)return;let e=u.current;if(!w.current){let e=g.current.parentElement;e&&(p(e.clientWidth),b.current=new ResizeObserver(e=>{for(let t of e)p(t.contentRect.width)}),b.current.observe(e),w.current=!0)}let t=!0;return(async()=>{u.current.forEach(e=>{if(e.renderTask)try{e.renderTask.cancel()}catch{}}),h(!0);try{let e=g.current;if(!t||!e)return;let a=(m||e.clientWidth)-48;for(let e=1;e<=n.numPages;e++){let l=await n.getPage(e),s=u.current.get(e),i=f.current.get(e);if(!t||!s)continue;let o=s.canvas,c=o.getContext("2d",{alpha:!1,desynchronized:!0});if(!c)continue;let d=l.getViewport({scale:1}),h=r/100*(a/d.width),m=Math.max(window.devicePixelRatio||1,4),p=h*m,g=l.getViewport({scale:p}),y=l.getViewport({scale:h});o.width=g.width,o.height=g.height,o.style.width=`${g.width/m}px`,o.style.height=`${g.height/m}px`,c.imageSmoothingEnabled=!1;let b={canvasContext:c,viewport:g,canvas:o},w=l.render(b);if(s.renderTask=w,w&&w.promise&&await w.promise,s.renderTask=null,i){i.innerHTML="",i.style.width=`${g.width/m}px`,i.style.height=`${g.height/m}px`;try{let e=await l.getTextContent(),t=new(await T()).TextLayer({textContentSource:e,container:i,viewport:y});await t.render()}catch(e){console.error("Failed to render text layer:",e)}}let v=x.current.get(e);if(v){v.innerHTML="",v.style.width=`${g.width/m}px`,v.style.height=`${g.height/m}px`;try{let e=await l.getAnnotations(),t=new(await T()).AnnotationLayer({div:v,page:l,viewport:y.clone({dontFlip:!0}),annotationStorage:null,accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,structTreeLayer:null,commentManager:null,linkService:{externalLinkTarget:2,externalLinkRel:"noopener noreferrer nofollow",externalLinkEnabled:!0,getDestinationHash:()=>"",getAnchorUrl:e=>e,addLinkAttributes:(e,t)=>{e.href=t,e.target="_blank",e.rel="noopener noreferrer nofollow"}}});await t.render({annotations:e,imageResourcesPath:"",renderForms:!1,enableScripting:!1,hasJSActions:!1,fieldObjects:null})}catch(e){console.error("Failed to render annotation layer:",e)}}}t&&h(!1)}catch(e){e?.name!=="RenderingCancelledException"&&console.error("Failed to render pages:",e),t&&h(!1)}})(),()=>{t=!1,e.forEach(e=>{if(e.renderTask)try{e.renderTask.cancel()}catch{}})}},[n,r,m,l]),(0,a.useEffect)(()=>{if(o&&s)return v.current=new IntersectionObserver(e=>{let a=t,r=0;e.forEach(e=>{if(e.isIntersecting){let t=parseInt(e.target.getAttribute("data-page-num")||"0");t&&e.intersectionRatio>r&&(r=e.intersectionRatio,a=t)}}),a!==t&&r>0&&(j.current=!1,s(a))},{root:g.current,rootMargin:"-20% 0px -20% 0px",threshold:0}),y.current.forEach((e,t)=>{v.current&&(e.setAttribute("data-page-num",t.toString()),v.current.observe(e))}),()=>{v.current&&v.current.disconnect()}},[o,s,t]),(0,a.useEffect)(()=>()=>{b.current&&b.current.disconnect()},[]),{totalPages:o,isRendering:d,canvasRefs:u,pageRefs:y,textLayerRefs:f,annotationLayerRefs:x,containerRef:g,scrollToPage:e=>{j.current=!0,s&&s(e)}}}(r);p[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>v(J),p[5]=s):s=p[5];let R=s;p[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>v(G),p[6]=n):n=p[6];let D=n;p[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>v(100),p[7]=i):i=p[7];let $=i;p[8]!==j||p[9]!==E?(o=()=>E(Math.max(j-1,1)),p[8]=j,p[9]=E,p[10]=o):o=p[10];let L=o;p[11]!==j||p[12]!==E||p[13]!==k?(c=()=>E(Math.min(j+1,k)),p[11]=j,p[12]=E,p[13]=k,p[14]=c):c=p[14];let A=c;return p[15]!==j||p[16]!==A||p[17]!==L||p[18]!==y||p[19]!==b||p[20]!==u||p[21]!==k||p[22]!==w?(d=(0,t.jsx)(O,{pdfUrl:u,currentPage:j,totalPages:k,zoom:w,onPrevPage:L,onNextPage:A,onZoomIn:R,onZoomOut:D,onZoomFit:$,isCollapsed:y,onToggleCollapse:b}),p[15]=j,p[16]=A,p[17]=L,p[18]=y,p[19]=b,p[20]=u,p[21]=k,p[22]=w,p[23]=d):d=p[23],p[24]!==M||p[25]!==C||p[26]!==P||p[27]!==x||p[28]!==g||p[29]!==y||p[30]!==S||p[31]!==_||p[32]!==u||p[33]!==f||p[34]!==F||p[35]!==k?(h=!y&&(0,t.jsx)(t.Fragment,{children:u?(0,t.jsx)(V,{canvasRefs:C,pageRefs:_,textLayerRefs:F,annotationLayerRefs:M,containerRef:P,isRendering:S,totalPages:k}):(0,t.jsx)(Z,{status:f,errorMsg:x,hasCompiled:g})}),p[24]=M,p[25]=C,p[26]=P,p[27]=x,p[28]=g,p[29]=y,p[30]=S,p[31]=_,p[32]=u,p[33]=f,p[34]=F,p[35]=k,p[36]=h):h=p[36],p[37]!==d||p[38]!==h?(m=(0,t.jsxs)("div",{className:"h-full flex py-1 flex-col bg-gray-800",children:[d,h]}),p[37]=d,p[38]=h,p[39]=m):m=p[39],m}function G(e){return Math.max(e-25,50)}function J(e){return Math.min(e+25,200)}var X=e.i(42584);class K{#e;#t=new Map;constructor(){this.#e=new Worker(e.r(80010),{type:"module",type:void 0}),this.#e.addEventListener("message",e=>{let t=e.data;if(!t||"compile-result"!==t.type)return;let a=this.#t.get(t.id);if(a){if(this.#t.delete(t.id),!t.ok)return void a.reject(Error(t.error));a.resolve({pdf:new Uint8Array(t.pdf),diagnostics:t.diagnostics})}})}dispose(){for(let e of(this.#e.terminate(),this.#t.values()))e.reject(Error("Worker terminated"));this.#t.clear()}compilePdf(e,t,a={}){let r="undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():String(Date.now()),l={type:"compile",id:r,files:e,mainFile:t,images:a};return new Promise((e,t)=>{this.#t.set(r,{resolve:e,reject:t}),this.#e.postMessage(l)})}}class Y{client;compileSeq=0;currentPdfUrl=null;listeners=[];constructor(){this.client=new K}addListener(e){return this.listeners.push(e),()=>{let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}async compile(e,t){let a=++this.compileSeq;this.notifyStatusChange("compiling");try{let r={},l={};for(let[t,a]of Object.entries(e))if(a.startsWith("data:")){let e=a.match(/^data:[^;]+;base64,(.+)$/);if(e)try{let a=e[1],r=atob(a),s=new Uint8Array(r.length);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);l[t]=s}catch(e){console.error(`Failed to decode binary file ${t}:`,e)}}else r[t]=a;let s=await this.client.compilePdf(r,t,l);if(a!==this.compileSeq)return{success:!1,status:"idle"};this.currentPdfUrl&&URL.revokeObjectURL(this.currentPdfUrl);let n=new Blob([s.pdf],{type:"application/pdf"}),i=URL.createObjectURL(n);return this.currentPdfUrl=i,this.notifySuccess(s.pdf,i),this.notifyStatusChange("done"),{success:!0,pdf:s.pdf,pdfUrl:i,status:"done"}}catch(t){if(a!==this.compileSeq)return{success:!1,status:"idle"};let e=t instanceof Error?t.message:String(t);return this.notifyError(e),this.notifyStatusChange("error"),{success:!1,error:e,status:"error"}}}getCurrentPdfUrl(){return this.currentPdfUrl}dispose(){this.client.dispose(),this.currentPdfUrl&&(URL.revokeObjectURL(this.currentPdfUrl),this.currentPdfUrl=null),this.listeners=[]}notifyStatusChange(e){this.listeners.forEach(t=>{t.onStatusChange?.(e)})}notifySuccess(e,t){this.listeners.forEach(a=>{a.onSuccess?.(e,t)})}notifyError(e){this.listeners.forEach(t=>{t.onError?.(e)})}}let Q="typst-project-",ee="typst-projects-list",et=new class{save(e){let t=Date.now();e.createdAt||(e.createdAt=t),e.lastModified=t,e.files.forEach(e=>{e.lastModified||(e.lastModified=t)});let a=Q+e.id;localStorage.setItem(a,JSON.stringify(e));let r=this.list(),l=r.findIndex(t=>t.id===e.id);l>=0?r[l]={id:e.id,name:e.name,lastModified:e.lastModified}:r.push({id:e.id,name:e.name,lastModified:e.lastModified}),localStorage.setItem(ee,JSON.stringify(r))}load(e){let t=localStorage.getItem(Q+e);if(!t)return null;try{return JSON.parse(t)}catch(e){return console.error("Failed to parse project:",e),null}}list(){let e=localStorage.getItem(ee);if(!e)return[];try{return JSON.parse(e)}catch(e){return console.error("Failed to parse projects list:",e),[]}}delete(e){localStorage.removeItem(Q+e);let t=this.list().filter(t=>t.id!==e);localStorage.setItem(ee,JSON.stringify(t))}createNew(e){let t={id:crypto.randomUUID(),name:e,files:[{path:"main.typ",content:`= ${e}

Start writing your document here.`,lastModified:Date.now()}],mainFile:"main.typ",createdAt:Date.now(),lastModified:Date.now()};return this.save(t),t}getStorageSize(){let e=0;for(let t=0;t<localStorage.length;t++){let a=localStorage.key(t);a?.startsWith(Q)&&(e+=(localStorage.getItem(a)||"").length)}return e}isStorageNearLimit(){return this.getStorageSize()>3145728}},ea={id:"temp",name:"My Document",files:[{path:"main.typ",content:"= My Document\n\nStart writing your document here.",lastModified:0}],mainFile:"main.typ",createdAt:0,lastModified:0};function er(e,t){return e[t.path]=t.content,e}function el(e,t){return t.lastModified-e.lastModified}function es(e){let{minValue:t,initialValue:r,onResize:l}=e,[s,n]=(0,a.useState)(r),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(e.maxValue),h=(0,a.useRef)(0),m=(0,a.useRef)(r),p=(0,a.useCallback)(e=>{e.preventDefault(),o(!0),h.current=e.clientX,m.current=s},[s]);return(0,a.useEffect)(()=>{if(!i)return;let e=e=>{let a=e.clientX-h.current,r=Math.min(Math.max(m.current+a,t),c);n(r),l?.(r)},a=()=>{o(!1)};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",a),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",a),document.body.style.cursor="",document.body.style.userSelect=""}},[i,t,c]),{value:s,isResizing:i,startResize:p,setValue:n,setMaxValue:d}}function en(){let[e,s]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=window.matchMedia("(max-width: 768px)"),t=e=>{h(e.matches)};return t(e),e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}},[]);let{status:m,pdfUrl:p,errorMsg:u,hasCompiled:f,compileNow:x,compileDebounced:g}=function(){let e,t,r,s,n,i=(0,l.c)(9),[o,c]=(0,a.useState)("idle"),[d,h]=(0,a.useState)(null),[m,p]=(0,a.useState)(null),[u,f]=(0,a.useState)(!1),x=(0,a.useRef)(null),g=(0,a.useRef)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{var e;let t,a,r=new Y;x.current=r;let l=r.addListener({onStatusChange:e=>{c(e)},onSuccess:(e,t)=>{h(t),p(null),f(!0)},onError:e=>{p(e),h(null),f(!0)}});return e=(e,t)=>{x.current&&x.current.compile(e,t)},t=null,(a=(...a)=>{null!==t&&clearTimeout(t),t=window.setTimeout(()=>{e(...a),t=null},1e3)}).cancel=()=>{null!==t&&(clearTimeout(t),t=null)},g.current=a,()=>{g.current?.cancel(),l(),r.dispose()}},t=[],i[0]=e,i[1]=t):(e=i[0],t=i[1]),(0,a.useEffect)(e,t),i[2]===Symbol.for("react.memo_cache_sentinel")?(r=async(e,t)=>{x.current&&await x.current.compile(e,t)},i[2]=r):r=i[2];let y=r;i[3]===Symbol.for("react.memo_cache_sentinel")?(s=(e,t)=>{g.current&&g.current(e,t)},i[3]=s):s=i[3];let b=s;return i[4]!==m||i[5]!==u||i[6]!==d||i[7]!==o?(n={status:o,pdfUrl:d,errorMsg:m,hasCompiled:u,compileNow:y,compileDebounced:b},i[4]=m,i[5]=u,i[6]=d,i[7]=o,i[8]=n):n=i[8],n}(),{currentProject:y,activeFilePath:b,getActiveFile:w,updateActiveFileContent:v,loadProject:j,handleFileSelect:N,handleFileCreate:k,handleFolderCreate:S,handleFileRename:C,handleFileMove:F,handleFileDelete:M}=function(e){let t,r,s=(0,l.c)(10),{currentProject:n,activeFilePath:i,setActiveFilePath:o,loadProject:c,saveProject:d}=function(e){let t,r,s,n,i,o,c,d=(0,l.c)(11),[h,m]=(0,a.useState)(ea),[p,u]=(0,a.useState)(ea.mainFile);d[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=setTimeout(()=>{let e=et.list();if(e.length>0){let t=e.sort(el)[0],a=et.load(t.id);if(a){m(a),u(a.mainFile);return}}let t=et.createNew("My Document");m(t),u(t.mainFile)},0);return()=>clearTimeout(e)},r=[],d[0]=t,d[1]=r):(t=d[0],r=d[1]),(0,a.useEffect)(t,r),d[2]!==h||d[3]!==e?(s=()=>{e&&e(h.files.reduce(er,{}),h.mainFile)},n=[h,e],d[2]=h,d[3]=e,d[4]=s,d[5]=n):(s=d[4],n=d[5]),(0,a.useEffect)(s,n),d[6]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{m(e),u(e.mainFile),et.save(e)},d[6]=i):i=d[6];let f=i;d[7]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{m(e),et.save(e)},d[7]=o):o=d[7];let x=o;return d[8]!==p||d[9]!==h?(c={currentProject:h,activeFilePath:p,setActiveFilePath:u,loadProject:f,saveProject:x},d[8]=p,d[9]=h,d[10]=c):c=d[10],c}(e);s[0]!==i||s[1]!==n||s[2]!==d||s[3]!==o?(t={currentProject:n,activeFilePath:i,setActiveFilePath:o,saveProject:d},s[0]=i,s[1]=n,s[2]=d,s[3]=o,s[4]=t):t=s[4];let h=function({currentProject:e,activeFilePath:t,setActiveFilePath:a,saveProject:r}){return{getActiveFile:()=>e.files.find(e=>e.path===t)||null,updateActiveFileContent:a=>{let l=e.files.map(e=>e.path===t?{...e,content:a,lastModified:0}:e);r({...e,files:l})},handleFileSelect:e=>{a(e)},handleFileCreate:(t,l)=>{if(e.files.some(e=>e.path===t))return void alert("A file with this name already exists!");let s={path:t,content:l??`// ${t}

`,lastModified:0};r({...e,files:[...e.files,s]}),a(t)},handleFolderCreate:t=>{let a=`${t}/.gitkeep`;e.files.some(e=>e.path.startsWith(t+"/"))?alert("A folder with this name already exists!"):r({...e,files:[...e.files,{path:a,content:"// Placeholder file to maintain folder structure\n",lastModified:0}]})},handleFileRename:(l,s)=>{if(l!==s){if(e.files.some(e=>e.path===s))return void alert("A file with this name already exists!");if(!l.includes(".")||e.files.some(e=>e.path.startsWith(l+"/"))){let n=e.files.map(e=>{if(e.path===l||e.path.startsWith(l+"/")){let t=e.path.substring(l.length);return{...e,path:s+t}}return e}),i=e.mainFile;(e.mainFile===l||e.mainFile.startsWith(l+"/"))&&(i=s+e.mainFile.substring(l.length));let o={...e,files:n,mainFile:i};(t===l||t.startsWith(l+"/"))&&a(s+t.substring(l.length)),r(o)}else{let n=e.files.map(e=>e.path===l?{...e,path:s}:e),i=e.mainFile;e.mainFile===l&&(i=s);let o={...e,files:n,mainFile:i};t===l&&a(s),r(o)}}},handleFileMove:(l,s)=>{if(l===s)return;if(e.files.some(e=>e.path===s))return void alert("A file with this name already exists at the destination!");let n=e.files.map(e=>e.path===l?{...e,path:s}:e),i=e.mainFile;e.mainFile===l&&(i=s);let o={...e,files:n,mainFile:i};t===l&&a(s),r(o)},handleFileDelete:l=>{let s,n=!l.includes(".")&&e.files.some(e=>e.path.startsWith(l+"/"));if(n)s=e.files.filter(e=>!e.path.startsWith(l+"/"));else{if(e.files.length<=1)return;s=e.files.filter(e=>e.path!==l)}if(0===s.length)return;let i=e.mainFile;(l===e.mainFile||n&&e.mainFile.startsWith(l+"/"))&&(i=s[0].path);let o={...e,files:s,mainFile:i};(l===t||n&&t.startsWith(l+"/"))&&a(i),r(o)}}}(t);return s[5]!==i||s[6]!==n||s[7]!==h||s[8]!==c?(r={currentProject:n,activeFilePath:i,loadProject:c,...h},s[5]=i,s[6]=n,s[7]=h,s[8]=c,s[9]=r):r=s[9],r}((0,a.useCallback)((e,t)=>{g(e,t)},[g])),E=es({minValue:200,maxValue:600,initialValue:280}),D=es({minValue:300,maxValue:5e3,initialValue:500}),T=async()=>{let e=y.files.reduce((e,t)=>(e[t.path]=t.content,e),{});await x(e,y.mainFile)},$=async e=>{let t=r.TYPST_EXAMPLES.find(t=>t.id===e);if(t)try{let e=await (0,r.fetchExample)(t.filePath),a=[{path:"main.typ",content:e,lastModified:0}];if(t.isMultiFile&&t.additionalFiles)for(let e of t.additionalFiles)try{let t=await (0,r.fetchExample)(e.filePath);a.push({path:e.path,content:t,lastModified:0})}catch(t){console.error(`Failed to load additional file ${e.path}:`,t)}let l={id:crypto.randomUUID(),name:t.name,files:a,mainFile:"main.typ",createdAt:0,lastModified:0};j(l),s(!1)}catch(e){console.error("Failed to load example:",e)}},L=n?48:d?320:E.value,A=o?48:440,z=E.isResizing||D.isResizing;return(0,t.jsxs)("div",{className:"flex flex-col h-screen bg-gray-900 text-white",children:[z&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 cursor-col-resize",style:{backgroundColor:"transparent"}}),(0,t.jsx)(P.default,{status:m,hasCompiled:f,pdfUrl:p,showExamples:e,isMobile:d,onToggleExamples:()=>s(!e),onCompileNow:T,onDownload:()=>{p&&function(e,t="document.pdf"){let a=document.createElement("a");a.href=e,a.download=t,a.click()}(p,"document.pdf")},onLoadExample:$}),d?(0,t.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[(0,t.jsx)("div",{style:{width:`${L}px`,minWidth:`${L}px`,maxWidth:`${L}px`,transition:n?"width 0.2s ease-in-out":"none"},className:"shrink-0",children:(0,t.jsx)(_,{project:y,activeFile:b,onFileSelect:N,onFileCreate:k,onFolderCreate:S,onFileDelete:M,onFileRename:C,onFileMove:F,isCollapsed:n,onToggleCollapse:()=>i(!n)})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)(R,{filePath:b,content:w()?.content||"",onChange:v})})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0",style:{minHeight:"300px"},children:(0,t.jsx)(B,{pdfUrl:p,status:m,errorMsg:u,hasCompiled:f,fileCount:y.files.length,charCount:w()?.content.length||0,isCollapsed:o,onToggleCollapse:()=>c(!o)})})]}):(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsx)("div",{style:{width:`${L}px`,minWidth:`${L}px`,maxWidth:`${L}px`,transition:n?"width 0.2s ease-in-out":"none"},className:"shrink-0",children:(0,t.jsx)(_,{project:y,activeFile:b,onFileSelect:N,onFileCreate:k,onFolderCreate:S,onFileDelete:M,onFileRename:C,onFileMove:F,isCollapsed:n,onToggleCollapse:()=>i(!n)})}),!n&&(0,t.jsx)(X.default,{isResizing:E.isResizing,onMouseDown:E.startResize}),(0,t.jsxs)("div",{className:"flex flex-1 min-w-0 overflow-hidden",id:"editor-preview-container",children:[(0,t.jsx)("div",{className:o?"flex-1 min-w-0":"shrink-0",style:o?{minWidth:"300px"}:{width:`${D.value}px`,minWidth:"300px",maxWidth:`${D.value}px`},children:(0,t.jsx)(R,{filePath:b,content:w()?.content||"",onChange:v})}),!o&&(0,t.jsx)(X.default,{isResizing:D.isResizing,onMouseDown:e=>{let t=document.getElementById("editor-preview-container");if(t){let e=t.offsetWidth;D.setMaxValue(e-A-6)}D.startResize(e)}}),(0,t.jsx)("div",{className:o?"shrink-0":"flex-1 min-w-0",style:o?{width:"48px",minWidth:"48px",maxWidth:"48px",transition:"width 0.2s ease-in-out"}:{minWidth:"440px"},children:(0,t.jsx)(B,{pdfUrl:p,status:m,errorMsg:u,hasCompiled:f,fileCount:y.files.length,charCount:w()?.content.length||0,isCollapsed:o,onToggleCollapse:()=>c(!o)})})]})]})]})}e.s(["default",()=>en],34912)}]);